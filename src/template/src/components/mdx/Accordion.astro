---
/**
 * Accordion - Expandable/collapsible content section
 * Usage:
 * <Accordion title="Click to expand">
 *   Hidden content here
 * </Accordion>
 */
interface Props {
  title: string;
  icon?: string;
  defaultOpen?: boolean;
}

const { title, icon, defaultOpen = false } = Astro.props;
const id = `accordion-${Math.random().toString(36).slice(2, 9)}`;
---

<details class="accordion not-prose" open={defaultOpen} id={id}>
  <summary class="accordion-header">
    <div class="accordion-title">
      {icon && <span class="accordion-icon">{icon}</span>}
      <span>{title}</span>
    </div>
    <svg class="accordion-chevron" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="m6 9 6 6 6-6"/>
    </svg>
  </summary>
  <div class="accordion-content">
    <slot />
  </div>
</details>

<style>
  @reference "../../styles/global.css";
  .accordion {
    @apply my-4 rounded border border-border bg-card overflow-hidden;
  }
  
  .accordion-header {
    @apply flex items-center justify-between px-4 py-3 cursor-pointer;
    @apply text-foreground font-medium text-sm;
    @apply hover:bg-muted transition-colors;
    @apply list-none;
  }
  
  .accordion-header::-webkit-details-marker {
    display: none;
  }
  
  .accordion-title {
    @apply flex items-center gap-2;
  }
  
  .accordion-icon {
    @apply text-base;
  }
  
  .accordion-chevron {
    @apply text-muted-foreground transition-transform duration-200;
  }
  
  .accordion[open] .accordion-chevron {
    @apply rotate-180;
  }
  
  .accordion-content {
    @apply px-4 pb-4 text-sm text-muted-foreground leading-relaxed;
    @apply border-t border-border;
  }
  
  .accordion-content :global(p:first-child) {
    @apply mt-3;
  }
  
  .accordion-content :global(p:last-child) {
    @apply mb-0;
  }
</style>
